/** 类型判断 */
export function isType(obj) {
    if (obj !== obj)
        return 'NaN';
    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();
}
/** 响应式
 * @param obj 目标对象
 * @param callback 响应回调
 * @param deep 深响应(默认false)
 */
export function ref(obj, callback, deep = false) {
    if (deep) {
        const Handler = {
            getPrototypeOf(proto) {
                return { proto, isProxy: true };
            },
            get: (o, k) => {
                subProxy(o, k);
                return Reflect.get(o, k);
            },
            set(o, k, v) {
                Reflect.set(o, k, v);
                subProxy(o, k);
                callback(o);
                return true;
            }
        };
        function subProxy(o, k) {
            let l = Reflect.get(o, k);
            if ((typeof l) == 'object' && Object.getPrototypeOf(l).isProxy != true) {
                Reflect.set(o, k, new Proxy(l, Handler));
            }
        }
        return new Proxy(obj, Handler);
    }
    else {
        return new Proxy(obj, {
            getPrototypeOf(proto) {
                return { proto, isProxy: true };
            },
            get: (o, k) => Reflect.get(o, k),
            set(o, k, v) {
                Reflect.set(o, k, v);
                callback(obj);
                return true;
            }
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdG9vbHMvdG9vbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVztBQUNYLE1BQU0sVUFBVSxNQUFNLENBQUMsR0FBUTtJQUMzQixJQUFJLEdBQUcsS0FBSyxHQUFHO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFDOUIsT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO0FBQ3pFLENBQUM7QUFDRDs7OztHQUlHO0FBQ0gsTUFBTSxVQUFVLEdBQUcsQ0FBbUIsR0FBTSxFQUFFLFFBQXdCLEVBQUUsSUFBSSxHQUFHLEtBQUs7SUFDaEYsSUFBSSxJQUFJLEVBQUU7UUFDTixNQUFNLE9BQU8sR0FBb0I7WUFDN0IsY0FBYyxDQUFDLEtBQUs7Z0JBQ2hCLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFBO1lBQ25DLENBQUM7WUFDRCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ1YsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtnQkFDZCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBQzVCLENBQUM7WUFDRCxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO2dCQUNQLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtnQkFDcEIsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtnQkFDZCxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQ1gsT0FBTyxJQUFJLENBQUM7WUFDaEIsQ0FBQztTQUNKLENBQUE7UUFDRCxTQUFTLFFBQVEsQ0FBbUIsQ0FBSSxFQUFFLENBQWtCO1lBQ3hELElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBQ3pCLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLFFBQVEsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUU7Z0JBQ3BFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQTthQUMzQztRQUNMLENBQUM7UUFDRCxPQUFPLElBQUksS0FBSyxDQUFJLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQTtLQUNwQztTQUFNO1FBRUgsT0FBTyxJQUFJLEtBQUssQ0FBQyxHQUFHLEVBQUU7WUFDbEIsY0FBYyxDQUFDLEtBQUs7Z0JBQ2hCLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFBO1lBQ25DLENBQUM7WUFDRCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDaEMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDUCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7Z0JBQ3BCLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQTtnQkFDYixPQUFPLElBQUksQ0FBQztZQUNoQixDQUFDO1NBQ0osQ0FBQyxDQUFBO0tBQ0w7QUFDTCxDQUFDIn0=